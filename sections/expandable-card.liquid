{{ 'expandable-card.css' | asset_url | stylesheet_tag }}

<div class="expandable-card-{{ section.id }}">
  <h2>{{ section.settings.title }}</h2>
  <div class="card-content">
    <p>{{ section.settings.content }}</p>
  </div>
  <div class="container">
    {% for block in section.blocks %}
      <div
        class="panel {% if forloop.first %}active{% endif %}"
        data-panel-id="{{ block.id }}"
        {% if block.settings.image %}
          style="background-image: url('{{ block.settings.image | img_url: "master" }}');"
        {% endif %}
      >
        <h3>{{ block.settings.panel_title }}</h3>
      </div>
    {% endfor %}
  </div>
</div>

<style>
    .expandable-card-{{ section.id }} {
      padding: 100px 0;
    }
    .expandable-card-{{ section.id }} .container {
      display: flex;
    }

    .expandable-card-{{ section.id }} h2,  .expandable-card-{{ section.id }} p {
      text-align: center;
    }
    .expandable-card-{{ section.id }} h2 {
      font-size: 32px;
      margin-bottom: 0;
    }
    .expandable-card-{{ section.id }} p {
      margin-top: 0;
    }

    .expandable-card-{{ section.id }} .panel {
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
      height: 80vh;
      border-radius: 50px;
      color: #fff;
      cursor: pointer;
      flex: 0.5;
      margin: 10px;
      position: relative;
      transition: flex 0.7s ease-in;
    }

    .expandable-card-{{ section.id }} .panel h3 {
      font-size: 30px;
      position: absolute;
      bottom: 20px;
      left: 20px;
      margin: 0;
      opacity: 0;
      color: #fff;
      font-weight: 600;
    }

    .expandable-card-{{ section.id }} .panel.active {
      flex: 5;
    }

    .expandable-card-{{ section.id }} .panel.active h3 {
      opacity: 1;
      transition: opacity 0.3s ease-in 0.4s;
    }

    @media (max-width: 480px) {
      .expandable-card-{{ section.id }} .container {
        width: 100vw;
      }

      .expandable-card-{{ section.id }} .panel:nth-of-type(4),
      .expandable-card-{{ section.id }} .panel:nth-of-type(5) {
        display: none;
      }
    }
</style>

<script src="{{ 'expandable-card.js' | asset_url }}" defer></script>
{% schema %}
{
  "name": "Expandable Card",
  "settings": [
    {
      "type": "text",
      "id": "title",
      "label": "Card Title",
      "default": "Expandable Card Title"
    },
    {
      "type": "textarea",
      "id": "content",
      "label": "Card Content",
      "default": "This is the expandable card content."
    }
  ],
  "blocks": [
    {
      "type": "panel",
      "name": "Panel",
      "settings": [
        {
          "type": "image_picker",
          "id": "image",
          "label": "Panel Image"
        },
        {
          "type": "text",
          "id": "panel_title",
          "label": "Panel Title"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Expandable Card"
    }
  ]
}
{% endschema %}
